package templates

import (
        "strconv"
        "strings"
        "johtotimes.com/src/model"
)

templ SingleTemplate(post *model.Post, body templ.Component) {
    <div class="container">
          <div class="category">
            { strings.ToUpper(post.Category.Singular) }
          </div>
        <h1>{ post.Title }</h1>
        <h2>{ post.Description }</h2>
        <div class="single">
            @body
        </div>
    </div>
    @setTitle(post.Title)
    @CommentLoader(post.ID)
}

templ PostTemplate(post *model.Post, body templ.Component) {
    <div class="single">
        @body
    </div>
}

templ NewsTemplate(post *model.Post, body templ.Component) {
    <div class="single">
        @body
    </div>
}

templ MailbagTemplate(post *model.Post, body templ.Component) {
    <div class="single">
        @body
    </div>
}

templ IssueTemplate(post *model.Post,
                    issueBody templ.Component, 
                    postBody templ.Component, 
                    newsBody templ.Component,
                    mailbagBody templ.Component,
                    postID int64,
) {
    <div class="container">
        <h2>Issue { strconv.Itoa(post.Issue) } - Volume { strconv.Itoa(post.Volume) }</h2>
        <h1>{ post.Title }</h1>
        <h2>{ post.Description }</h2>
        @issueBody
        if newsBody != nil {
            <hr />
            <h4>News</h4>
            @newsBody
        } 
        <hr />
        @PostTemplate(post, postBody)
        if mailbagBody != nil {
            <hr />
            <h4>Mailbag</h4>
            @mailbagBody
        }
    </div>
    @setTitle(post.Title)
    @CommentLoader(postID)
}

templ setTitle(title string) {
    <input type="hidden" name="title" id="title" value={ title } />
    <script>
        document.title = document.getElementById("title").value;
    </script>
}
